%ul.breadcrumb
  %li
    %i.icon-folder-open
  - @directory.ancestors.each do |a|
    %li
      = link_to a.name, {:id => a.id }
      %span.divider= "/"
  %li.active= @directory.name

.row
  .span3
    .panel.rounded
      .content
        %ul.nav.nav-list
          %li.nav-header 操作
          %li
            = link_to("#") do
              %i.icon-info-sign
              = "詳細"
          %li
            = link_to "#mkdir_dialog", {:'data-toggle' => "modal"} do
              %i.icon-plus-sign
              = "フォルダの追加"
          %li
            = link_to "#upload_dialog", {:'data-toggle' => "modal"} do
              %i.icon-upload
              = "アップロード"
          %li.divider
          %li
            = link_to "#" do
              %i.icon-trash
              = "削除"

  .span9
    .panel.rounded
      .header.rounded-top
        %h4
          %i.icon-folder-open
          = @directory.name

      .content
        .chocoholic-contents
          - @directory.children.each do |content|
            .chocoholic-content
              .icon
                - if content.is_a?(Chocoholic::Directory)
                  %i.icon-folder-close
                - else
                  %i.icon-file
              .name
                = link_to content.name, {:id => content.id, :action => :show}
              .action
                .detail
                  = link_to "#info" do
                    %i.icon-info-sign
                    詳細
                - if !content.is_a?(Chocoholic::Directory)
                  .download
                    = link_to "#DL" do
                      %i.icon-download
                      ダウンロード
              .date
                .created_at
                  登録:
                  = content.created_at.strftime("%Y/%m/%d %H:%M")
                .updated_at
                  更新:
                  = content.updated_at.strftime("%Y/%m/%d %H:%M")

#mkdir_dialog.modal.hide.fade(tabindex = "-1" role = "dialog" aria-lablledby="mkdirModalLabel" aria-hidden="true")
  .modal-header
    %button.close(type="button" data-dismiss="modal" aria-hidden="true") ×
    %h3#mkdirModalLabel フォルダの追加
  .modal-body
    = simple_form_for @directory.children.new, :url => {:action => :mkdir, :id => @directory.id} do |f|
      = f.input :name, :label => "フォルダ名"
      %button.btn.btn-primary(type="submit") 追加

#upload_dialog.modal.hide.fade(tabindex = "-1" role = "dialog" aria-lablledby="uploadModalLabel" aria-hidden="true")
  .modal-header
    %button.close(type="button" data-dismiss="modal" aria-hidden="true") ×
    %h3#uploadModalLabel アップロード
  .modal-body
    = simple_form_for @directory.children.new, :url => {:action => :upload, :id => @directory.id} do |f|
      = f.input :name, :label => "ファイル名"
      = f.input :data, :as => :file, :label => "アップロードするファイルの選択"
      %button.btn.btn-primary(type="submit") アップロード
